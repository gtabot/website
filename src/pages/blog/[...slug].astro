---
import { CollectionEntry, getCollection } from 'astro:content';

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => {
        const date = new Date(post.data.date);
        const year = date.getFullYear();
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const slug = `${year}/${month}/${post.slug}`;
        return {
            params: { slug: slug },
            props: post
        };
    });
}


type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content } = await post.render();
---

<Content />